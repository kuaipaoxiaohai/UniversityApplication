<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faculty Directory - Stanford & MIT</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --background: #0f172a;
            --surface: #1e293b;
            --surface-light: #334155;
            --text: #f8fafc;
            --text-secondary: #94a3b8;
            --stanford: #8c1515;
            --mit: #a31f34;
            --border: #475569;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--surface) 0%, var(--background) 100%);
            padding: 3rem 2rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 70% 50%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            position: relative;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            gap: 2rem;
            justify-content: center;
            padding: 1.5rem 2rem;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Controls */
        .controls {
            padding: 1.5rem 2rem;
            background: var(--surface);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            color: var(--text);
            font-size: 1rem;
            transition: all 0.2s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .search-box::before {
            content: 'üîç';
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1rem;
        }

        .filter-btn {
            padding: 0.75rem 1.25rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .filter-btn:hover {
            border-color: var(--primary);
            color: var(--text);
        }

        .filter-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Faculty Grid */
        .faculty-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Faculty Card */
        .faculty-card {
            background: var(--surface);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .faculty-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: var(--primary);
        }

        .faculty-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .faculty-card:hover::before {
            opacity: 1;
        }

        .faculty-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text);
        }

        .faculty-title {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }

        .faculty-school {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .school-stanford-cheme {
            background: rgba(140, 21, 21, 0.2);
            color: #f87171;
        }

        .school-stanford-mse {
            background: rgba(140, 21, 21, 0.2);
            color: #fb923c;
        }

        .school-stanford-doerr {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .school-mit-dmse {
            background: rgba(163, 31, 52, 0.2);
            color: #f472b6;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .contact-item a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .contact-item a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }

        .contact-icon {
            width: 20px;
            text-align: center;
        }

        .research-areas {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .research-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .research-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .research-tag {
            display: inline-block;
            padding: 0.3rem 0.75rem;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 1rem;
            font-size: 0.8rem;
            color: var(--primary);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 4rem;
            color: var(--text-secondary);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* No results */
        .no-results {
            text-align: center;
            padding: 4rem;
            color: var(--text-secondary);
            grid-column: 1 / -1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .stats-bar {
                gap: 1rem;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .faculty-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .controls {
                flex-direction: column;
                gap: 0.75rem;
            }

            .filter-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <header class="header">
        <h1>üéì Faculty Directory</h1>
        <p>Top Universities - Chemical Engineering, Materials Science, Chemistry, Sustainability</p>
    </header>

    <div class="stats-bar" id="statsBar">
        <div class="stat-item">
            <div class="stat-value" id="totalCount">-</div>
            <div class="stat-label">Total Faculty</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="emailCount">-</div>
            <div class="stat-label">With Email</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="phoneCount">-</div>
            <div class="stat-label">With Phone</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="pubCount">-</div>
            <div class="stat-label">With Publications</div>
        </div>
    </div>

    <div class="controls">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search by name, department, research...">
        </div>
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="stanford-cheme">Stanford ChemE</button>
        <button class="filter-btn" data-filter="stanford-mse">Stanford MSE</button>
        <button class="filter-btn" data-filter="stanford-doerr">Stanford Doerr</button>
        <button class="filter-btn" data-filter="mit-dmse">MIT DMSE</button>
        <button class="filter-btn" data-filter="harvard-chemistry">Harvard Chem</button>
        <button class="filter-btn" data-filter="harvard-seas">Harvard SEAS</button>
        <button class="filter-btn" data-filter="yale-chemistry">Yale Chem</button>
        <button class="filter-btn" data-filter="princeton-chemistry">Princeton Chem</button>
        <button class="filter-btn" data-filter="uchicago-chemistry">UChicago Chem</button>
        <button class="filter-btn" data-filter="northwestern-chemistry">NU Chem</button>
        <button class="filter-btn" data-filter="northwestern-mse">NU MSE</button>
        <button class="filter-btn" data-filter="berkeley-chemistry">Berkeley Chem</button>
        <button class="filter-btn" data-filter="berkeley-cbe">Berkeley CBE</button>
        <button class="filter-btn" data-filter="caltech-cce">Caltech CCE</button>
        <button class="filter-btn" data-filter="caltech-materials">Caltech MatSci</button>
    </div>

    <main class="faculty-grid" id="facultyGrid">
        <div class="loading">
            <div class="loading-spinner"></div>
            <p>Loading faculty data...</p>
        </div>
    </main>

    <script>
        let facultyData = [];
        let currentFilter = 'all';
        let currentSearch = '';

        // Determine school from department source
        function getSchool(source) {
            if (!source) return 'unknown';
            if (source.includes('cheme.stanford')) return 'stanford-cheme';
            if (source.includes('mse.stanford')) return 'stanford-mse';
            if (source.includes('sustainability.stanford')) return 'stanford-doerr';
            if (source.includes('mit.edu')) return 'mit-dmse';
            if (source.includes('chemistry.harvard')) return 'harvard-chemistry';
            if (source.includes('seas.harvard')) return 'harvard-seas';
            if (source.includes('yale.edu') && source.includes('chem')) return 'yale-chemistry';
            if (source.includes('chemistry.princeton')) return 'princeton-chemistry';
            if (source.includes('chemistry.uchicago')) return 'uchicago-chemistry';
            if (source.includes('chemistry.northwestern')) return 'northwestern-chemistry';
            if (source.includes('matsci.northwestern')) return 'northwestern-mse';
            if (source.includes('chemistry.berkeley')) return 'berkeley-chemistry';
            if (source.includes('berkeley') && source.includes('cbe')) return 'berkeley-cbe';
            if (source.includes('cce.caltech')) return 'caltech-cce';
            if (source.includes('cms.caltech')) return 'caltech-materials';
            return 'unknown';
        }

        function getSchoolLabel(school) {
            const labels = {
                'stanford-cheme': 'Stanford ChemE',
                'stanford-mse': 'Stanford MSE',
                'stanford-doerr': 'Stanford Doerr',
                'mit-dmse': 'MIT DMSE',
                'harvard-chemistry': 'Harvard Chem',
                'harvard-seas': 'Harvard SEAS',
                'yale-chemistry': 'Yale Chem',
                'princeton-chemistry': 'Princeton Chem',
                'uchicago-chemistry': 'UChicago Chem',
                'northwestern-chemistry': 'NU Chem',
                'northwestern-mse': 'NU MSE',
                'berkeley-chemistry': 'Berkeley Chem',
                'berkeley-cbe': 'Berkeley CBE',
                'caltech-cce': 'Caltech CCE',
                'caltech-materials': 'Caltech MatSci'
            };
            return labels[school] || 'Unknown';
        }

        // Research field translation mapping (English to Chinese)
        const researchTranslations = {
            // Materials Science
            'materials science': 'ÊùêÊñôÁßëÂ≠¶',
            'materials': 'ÊùêÊñô',
            'nanomaterials': 'Á∫≥Á±≥ÊùêÊñô',
            'biomaterials': 'ÁîüÁâ©ÊùêÊñô',
            'polymers': 'ËÅöÂêàÁâ©',
            'polymer': 'ËÅöÂêàÁâ©',
            'ceramics': 'Èô∂Áì∑',
            'metals': 'ÈáëÂ±ûÊùêÊñô',
            'composites': 'Â§çÂêàÊùêÊñô',
            'semiconductors': 'ÂçäÂØº‰Ωì',
            'thin films': 'ËñÑËÜú',
            'crystals': 'Êô∂‰Ωì',
            'crystallography': 'Êô∂‰ΩìÂ≠¶',
            'metallurgy': 'ÂÜ∂ÈáëÂ≠¶',

            // Chemistry & ChemE
            'chemical engineering': 'ÂåñÂ≠¶Â∑•Á®ã',
            'chemistry': 'ÂåñÂ≠¶',
            'catalysis': 'ÂÇ¨Âåñ',
            'catalyst': 'ÂÇ¨ÂåñÂâÇ',
            'electrochemistry': 'ÁîµÂåñÂ≠¶',
            'organic chemistry': 'ÊúâÊú∫ÂåñÂ≠¶',
            'inorganic chemistry': 'Êó†Êú∫ÂåñÂ≠¶',
            'physical chemistry': 'Áâ©ÁêÜÂåñÂ≠¶',
            'biochemistry': 'ÁîüÁâ©ÂåñÂ≠¶',
            'polymer chemistry': 'È´òÂàÜÂ≠êÂåñÂ≠¶',
            'surface chemistry': 'Ë°®Èù¢ÂåñÂ≠¶',
            'thermodynamics': 'ÁÉ≠ÂäõÂ≠¶',
            'kinetics': 'Âä®ÂäõÂ≠¶',
            'synthesis': 'ÂêàÊàê',
            'spectroscopy': 'ÂÖâË∞±Â≠¶',

            // Energy
            'energy': 'ËÉΩÊ∫ê',
            'renewable energy': 'ÂèØÂÜçÁîüËÉΩÊ∫ê',
            'solar energy': 'Â§™Èò≥ËÉΩ',
            'solar cells': 'Â§™Èò≥ËÉΩÁîµÊ±†',
            'batteries': 'ÁîµÊ±†',
            'battery': 'ÁîµÊ±†',
            'fuel cells': 'ÁáÉÊñôÁîµÊ±†',
            'hydrogen': 'Ê∞¢ËÉΩ',
            'energy storage': 'ÂÇ®ËÉΩ',
            'photovoltaics': 'ÂÖâ‰ºè',
            'clean energy': 'Ê∏ÖÊ¥ÅËÉΩÊ∫ê',

            // Sustainability & Environment
            'sustainability': 'ÂèØÊåÅÁª≠ÂèëÂ±ï',
            'environment': 'ÁéØÂ¢É',
            'environmental': 'ÁéØÂ¢É',
            'climate': 'Ê∞îÂÄô',
            'climate change': 'Ê∞îÂÄôÂèòÂåñ',
            'carbon': 'Á¢≥',
            'carbon capture': 'Á¢≥ÊçïËé∑',
            'water': 'Ê∞¥ËµÑÊ∫ê',
            'pollution': 'Ê±°Êüì',
            'ecology': 'ÁîüÊÄÅÂ≠¶',
            'ecosystem': 'ÁîüÊÄÅÁ≥ªÁªü',
            'conservation': '‰øùÊä§',
            'biodiversity': 'ÁîüÁâ©Â§öÊ†∑ÊÄß',

            // Physics & Engineering
            'physics': 'Áâ©ÁêÜ',
            'optics': 'ÂÖâÂ≠¶',
            'photonics': 'ÂÖâÂ≠êÂ≠¶',
            'electronics': 'ÁîµÂ≠êÂ≠¶',
            'mechanical': 'Êú∫Ê¢∞',
            'thermal': 'ÁÉ≠Â≠¶',
            'fluid mechanics': 'ÊµÅ‰ΩìÂäõÂ≠¶',
            'transport': '‰º†Ëæì',
            'mechanics': 'ÂäõÂ≠¶',
            'dynamics': 'Âä®ÂäõÂ≠¶',

            // Biology & Medicine
            'biology': 'ÁîüÁâ©Â≠¶',
            'bioengineering': 'ÁîüÁâ©Â∑•Á®ã',
            'biotechnology': 'ÁîüÁâ©ÊäÄÊúØ',
            'drug delivery': 'ËçØÁâ©ÈÄíÈÄÅ',
            'tissue engineering': 'ÁªÑÁªáÂ∑•Á®ã',
            'medical devices': 'ÂåªÁñóÂô®Ê¢∞',
            'biophysics': 'ÁîüÁâ©Áâ©ÁêÜ',
            'protein': 'ËõãÁôΩË¥®',
            'cell': 'ÁªÜËÉû',
            'molecular': 'ÂàÜÂ≠ê',

            // Computation & Data
            'computational': 'ËÆ°ÁÆó',
            'machine learning': 'Êú∫Âô®Â≠¶‰π†',
            'artificial intelligence': 'AI',
            'simulation': 'Ê®°Êãü',
            'modeling': 'Âª∫Ê®°',
            'data science': 'Êï∞ÊçÆÁßëÂ≠¶',

            // Other
            'nanotechnology': 'Á∫≥Á±≥ÊäÄÊúØ',
            'manufacturing': 'Âà∂ÈÄ†',
            'processing': 'Âä†Â∑•',
            'characterization': 'Ë°®ÂæÅ',
            'microscopy': 'ÊòæÂæÆÊäÄÊúØ',
            'imaging': 'ÊàêÂÉè',
            'design': 'ËÆæËÆ°',
            'innovation': 'ÂàõÊñ∞',
            'research': 'Á†îÁ©∂'
        };

        // Translate research field to Chinese
        function translateToChineseTag(text) {
            if (!text) return '';
            const lowerText = text.toLowerCase().trim();

            // Direct match
            if (researchTranslations[lowerText]) {
                return researchTranslations[lowerText];
            }

            // Partial match - look for keywords in the text
            for (const [eng, chi] of Object.entries(researchTranslations)) {
                if (lowerText.includes(eng) || eng.includes(lowerText)) {
                    return chi;
                }
            }

            // No translation found, return original (truncated if too long)
            return text.length > 20 ? text.substring(0, 18) + '...' : text;
        }

        // Extract research keywords from text (like publication titles)
        function extractKeywordsFromText(text) {
            if (!text) return [];
            const lowerText = text.toLowerCase();
            const found = new Set();

            // Keyword to Chinese translation mapping
            const keywordMap = {
                // Materials
                'nanomaterial': 'Á∫≥Á±≥ÊùêÊñô', 'nanoparticle': 'Á∫≥Á±≥ÊùêÊñô', 'nano': 'Á∫≥Á±≥ÊäÄÊúØ',
                'polymer': 'ËÅöÂêàÁâ©', 'biomaterial': 'ÁîüÁâ©ÊùêÊñô', 'semiconductor': 'ÂçäÂØº‰Ωì',
                'thin film': 'ËñÑËÜú', 'crystal': 'Êô∂‰Ωì', 'alloy': 'ÂêàÈáë', 'ceramic': 'Èô∂Áì∑',
                'graphene': 'Áü≥Â¢®ÁÉØ', 'carbon nanotube': 'Á¢≥Á∫≥Á±≥ÁÆ°', 'quantum dot': 'ÈáèÂ≠êÁÇπ',
                // Chemistry
                'catalysis': 'ÂÇ¨Âåñ', 'catalyst': 'ÂÇ¨Âåñ', 'electrochemical': 'ÁîµÂåñÂ≠¶',
                'photochemical': 'ÂÖâÂåñÂ≠¶', 'synthesis': 'ÂêàÊàê', 'molecular': 'ÂàÜÂ≠êÁßëÂ≠¶',
                'organic': 'ÊúâÊú∫ÂåñÂ≠¶', 'inorganic': 'Êó†Êú∫ÂåñÂ≠¶', 'polymer chemistry': 'È´òÂàÜÂ≠êÂåñÂ≠¶',
                // Energy
                'solar': 'Â§™Èò≥ËÉΩ', 'battery': 'ÁîµÊ±†', 'fuel cell': 'ÁáÉÊñôÁîµÊ±†',
                'photovoltaic': 'ÂÖâ‰ºè', 'energy storage': 'ÂÇ®ËÉΩ', 'hydrogen': 'Ê∞¢ËÉΩ',
                'renewable': 'ÂèØÂÜçÁîüËÉΩÊ∫ê', 'lithium': 'ÈîÇÁîµÊ±†', 'perovskite': 'ÈíôÈíõÁüø',
                // Environment
                'climate': 'Ê∞îÂÄô', 'carbon capture': 'Á¢≥ÊçïËé∑', 'sustainability': 'ÂèØÊåÅÁª≠ÂèëÂ±ï',
                'environmental': 'ÁéØÂ¢É', 'pollution': 'Ê±°ÊüìÊ≤ªÁêÜ', 'water treatment': 'Ê∞¥Â§ÑÁêÜ',
                'ecosystem': 'ÁîüÊÄÅÁ≥ªÁªü', 'biodiversity': 'ÁîüÁâ©Â§öÊ†∑ÊÄß',
                // Biology
                'drug delivery': 'ËçØÁâ©ÈÄíÈÄÅ', 'tissue': 'ÁªÑÁªáÂ∑•Á®ã', 'protein': 'ËõãÁôΩË¥®',
                'cell': 'ÁªÜËÉû', 'gene': 'Âü∫Âõ†', 'biomedical': 'ÁîüÁâ©ÂåªÂ≠¶', 'dna': 'DNA',
                // Physics/Engineering
                'optic': 'ÂÖâÂ≠¶', 'photonic': 'ÂÖâÂ≠êÂ≠¶', 'electronic': 'ÁîµÂ≠êÂ≠¶',
                'magnetic': 'Á£ÅÊÄßÊùêÊñô', 'thermal': 'ÁÉ≠Â≠¶', 'mechanical': 'ÂäõÂ≠¶',
                'transport': '‰º†Ëæì', 'superconductor': 'Ë∂ÖÂØº', 'ferroelectric': 'ÈìÅÁîµ',
                // Methods
                'machine learning': 'Êú∫Âô®Â≠¶‰π†', 'computational': 'ËÆ°ÁÆóÊ®°Êãü',
                'simulation': 'Ê®°Êãü', 'microscopy': 'ÊòæÂæÆÊäÄÊúØ', 'spectroscopy': 'ÂÖâË∞±Â≠¶',
                'imaging': 'ÊàêÂÉèÊäÄÊúØ', 'characterization': 'Ë°®ÂæÅ'
            };

            for (const [key, chinese] of Object.entries(keywordMap)) {
                if (lowerText.includes(key) && !found.has(chinese)) {
                    found.add(chinese);
                    if (found.size >= 4) break;
                }
            }

            return Array.from(found);
        }

        // Get default research areas based on school/department
        function getDefaultResearchAreas(school, title) {
            const defaults = {
                'stanford-cheme': ['ÂåñÂ≠¶Â∑•Á®ã', 'ÊùêÊñôÁßëÂ≠¶', 'ÂÇ¨Âåñ', 'ËÉΩÊ∫ê'],
                'stanford-mse': ['ÊùêÊñôÁßëÂ≠¶', 'Á∫≥Á±≥ÊùêÊñô', 'ÁîµÂ≠êÊùêÊñô', 'ÂäõÂ≠¶'],
                'stanford-doerr': ['ÂèØÊåÅÁª≠ÂèëÂ±ï', 'Ê∞îÂÄôÁßëÂ≠¶', 'ÁéØÂ¢ÉÂ∑•Á®ã', 'ËÉΩÊ∫ê'],
                'mit-dmse': ['ÊùêÊñôÁßëÂ≠¶', 'Á∫≥Á±≥ÊäÄÊúØ', 'ËÉΩÊ∫êÊùêÊñô', 'ÁîüÁâ©ÊùêÊñô']
            };
            return defaults[school] || ['ÁßëÂ≠¶Á†îÁ©∂', 'Â∑•Á®ãÊäÄÊúØ'];
        }

        // Create faculty card HTML
        function createCard(faculty) {
            const school = getSchool(faculty.department_source);
            const schoolLabel = getSchoolLabel(school);

            let contactHtml = '';
            if (faculty.email) {
                contactHtml += `
                    <div class="contact-item">
                        <span class="contact-icon">üìß</span>
                        <a href="mailto:${faculty.email}">${faculty.email}</a>
                    </div>`;
            }
            if (faculty.phone) {
                contactHtml += `
                    <div class="contact-item">
                        <span class="contact-icon">üìû</span>
                        <a href="tel:${faculty.phone}">${faculty.phone}</a>
                    </div>`;
            }
            if (faculty.assistant_email) {
                contactHtml += `
                    <div class="contact-item">
                        <span class="contact-icon">üë§</span>
                        <span>Assistant: <a href="mailto:${faculty.assistant_email}">${faculty.assistant_email}</a></span>
                    </div>`;
            }
            if (faculty.lab_website) {
                const labUrl = faculty.lab_website.startsWith('http') ? faculty.lab_website : 'https://' + faculty.lab_website;
                contactHtml += `
                    <div class="contact-item">
                        <span class="contact-icon">üî¨</span>
                        <a href="${labUrl}" target="_blank">Lab Website</a>
                    </div>`;
            }
            if (faculty.google_scholar) {
                contactHtml += `
                    <div class="contact-item">
                        <span class="contact-icon">üìö</span>
                        <a href="${faculty.google_scholar}" target="_blank">Google Scholar</a>
                    </div>`;
            }
            if (faculty.profile_url) {
                contactHtml += `
                    <div class="contact-item">
                        <span class="contact-icon">üîó</span>
                        <a href="${faculty.profile_url}" target="_blank">Profile Page</a>
                    </div>`;
            }

            let researchHtml = '';
            // Extract research interests from multiple sources
            let interests = [];

            // First try: use research_interests from data
            if (faculty.research_interests && Array.isArray(faculty.research_interests) && faculty.research_interests.length > 0) {
                interests = faculty.research_interests.map(i => translateToChineseTag(i));
            }

            // Second try: extract keywords from publications
            if (interests.length === 0 && faculty.top_publications && faculty.top_publications.length > 0) {
                const pubs = Array.isArray(faculty.top_publications)
                    ? faculty.top_publications.join(' ')
                    : faculty.top_publications;
                interests = extractKeywordsFromText(pubs);
            }

            // Third try: infer from department/school
            if (interests.length === 0) {
                const school = getSchool(faculty.department_source);
                interests = getDefaultResearchAreas(school, faculty.title);
            }

            if (interests.length > 0) {
                researchHtml = `
                    <div class="research-areas">
                        <div class="research-title">üî¨ Á†îÁ©∂ÊñπÂêë</div>
                        <div class="research-tags">
                            ${interests.slice(0, 4).map(i => `<span class="research-tag">${i}</span>`).join('')}
                        </div>
                    </div>`;
            }

            return `
                <article class="faculty-card" data-school="${school}">
                    <h3 class="faculty-name">${faculty.name || 'Unknown'}</h3>
                    <div class="faculty-title">${faculty.title || ''}</div>
                    <span class="faculty-school school-${school}">${schoolLabel}</span>
                    ${contactHtml ? `<div class="contact-info">${contactHtml}</div>` : ''}
                    ${researchHtml}
                </article>
            `;
        }

        // Render faculty cards
        function renderFaculty() {
            const grid = document.getElementById('facultyGrid');

            let filtered = facultyData.filter(f => {
                // Filter by school
                if (currentFilter !== 'all') {
                    const school = getSchool(f.department_source);
                    if (school !== currentFilter) return false;
                }

                // Filter by search
                if (currentSearch) {
                    const searchLower = currentSearch.toLowerCase();
                    const text = `${f.name} ${f.title} ${f.email} ${f.department_source}`.toLowerCase();
                    if (!text.includes(searchLower)) return false;
                }

                return true;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '<div class="no-results">No faculty found matching your criteria.</div>';
                return;
            }

            grid.innerHTML = filtered.map(createCard).join('');
        }

        // Update stats
        function updateStats() {
            document.getElementById('totalCount').textContent = facultyData.length;
            document.getElementById('emailCount').textContent = facultyData.filter(f => f.email).length;
            document.getElementById('phoneCount').textContent = facultyData.filter(f => f.phone).length;
            document.getElementById('pubCount').textContent = facultyData.filter(f => f.top_publications && f.top_publications.length > 0).length;
        }

        // Load data
        async function loadData() {
            try {
                const response = await fetch('faculty_data.json');
                if (!response.ok) throw new Error('Failed to load data');
                facultyData = await response.json();
                updateStats();
                renderFaculty();
            } catch (error) {
                document.getElementById('facultyGrid').innerHTML = `
                    <div class="no-results">
                        <p>Error loading data. Make sure <code>faculty_data.json</code> exists.</p>
                        <p style="margin-top: 1rem; font-size: 0.9rem;">Run: <code>python -m http.server 8000</code></p>
                    </div>
                `;
            }
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', (e) => {
            currentSearch = e.target.value;
            renderFaculty();
        });

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                renderFaculty();
            });
        });

        // Initialize
        loadData();
    </script>
</body>

</html>